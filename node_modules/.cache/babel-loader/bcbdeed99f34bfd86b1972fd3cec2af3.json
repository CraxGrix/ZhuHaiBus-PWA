{"remainingRequest":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js!/home/crax/Code/ZhuHaiBus-PWA/node_modules/vuetify-loader/lib/loader.js!/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/crax/Code/ZhuHaiBus-PWA/src/page/details/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/crax/Code/ZhuHaiBus-PWA/src/page/details/index.vue","mtime":1550224055674},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1550211689884},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js","mtime":1550211689805},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vuetify-loader/lib/loader.js","mtime":1550211707105},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1550211689884},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js","mtime":1550211706840},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1550211689884},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js","mtime":1550211689805},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vuetify-loader/lib/loader.js","mtime":1550211707105},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1550211689884},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js","mtime":1550211706840}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.find\";\nimport _objectSpread from \"/home/crax/Code/ZhuHaiBus-PWA/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions, mapGetters, mapMutations, mapState } from 'vuex';\nimport { requestRealTimeData } from '@/script/request';\nimport { filterObj } from '@/script/utils';\nexport default {\n  data: function data() {\n    return {\n      error_snackbar: false,\n      timeout: 3000,\n      loading: false,\n      requestIcon: 'none',\n      errorMsg: \"\",\n      intervalId: \"\",\n      busList: []\n    };\n  },\n  computed: _objectSpread({}, mapState([\"routers\"])),\n  watch: {\n    loading: function loading(val) {\n      var _this = this;\n\n      if (!val) {\n        this.requestIcon = 'done';\n        setTimeout(function () {\n          return _this.requestIcon = 'none';\n        }, 1000);\n      }\n    }\n  },\n  methods: _objectSpread({}, mapActions([\"viewReturn\", \"viewConversion\"]), mapMutations([\"updateRealTimeData\", \"reverseRouter\"]), {\n    showError: function showError(e) {\n      this.errorMsg = e;\n      this.error_snackbar = true;\n    },\n    update: function update(params) {\n      var _this2 = this;\n\n      this.loading = true;\n      requestRealTimeData(params).then(function (result) {\n        _this2.loading = false;\n        _this2.busList = result.data;\n      }).catch(function (e) {\n        return _this2.showError(e.status);\n      });\n    },\n    iconShowJudge: function iconShowJudge(name, genre) {\n      var result = this.busList.find(function (info) {\n        return info['name'] === name;\n      });\n\n      if (result != null) {\n        return genre === (result[\"busState\"] ? 'in' : 'out');\n      }\n\n      return false;\n    },\n    getBusQuantify: function getBusQuantify(name, logic) {\n      var result = filterObj('busState', logic, filterObj('name', name, this.busList));\n      return result.length;\n    },\n    reverse: function reverse() {\n      var _this3 = this;\n\n      this.reverseRouter(this.$route.params.Id);\n      this.viewConversion({\n        name: 'details',\n        params: this.routers.flat().find(function (r) {\n          return r[\"Name\"] === _this3.$route.params[\"Name\"] && r['Id'] !== _this3.$route.params[\"Id\"];\n        })\n      });\n    },\n    clear: function clear() {\n      clearInterval(this.intervalId);\n    },\n    startInterval: function startInterval() {\n      this.intervalId = setInterval(function (self) {\n        if (self.$route.params.hasOwnProperty(\"Id\")) self.update(self.$route.params);\n      }, 4000, this);\n    }\n  }),\n  mounted: function mounted() {\n    this.update(this.$route.params);\n    if (!this.intervalId) this.startInterval();\n  },\n  beforeRouteUpdate: function beforeRouteUpdate(to, from, next) {\n    this.busList = [];\n    this.update(to.params);\n    next();\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    this.busList = [];\n    next();\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA,SAAA,UAAA,EAAA,UAAA,EAAA,YAAA,EAAA,QAAA,QAAA,MAAA;AACA,SAAA,mBAAA,QAAA,kBAAA;AACA,SAAA,SAAA,QAAA,gBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,cAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA,KAHA;AAIA,MAAA,WAAA,EAAA,MAJA;AAKA,MAAA,QAAA,EAAA,EALA;AAMA,MAAA,UAAA,EAAA,EANA;AAOA,MAAA,OAAA,EAAA;AAPA,KAAA;AAAA,GADA;AAUA,EAAA,QAAA,oBACA,QAAA,CAAA,CAAA,SAAA,CAAA,CADA,CAVA;AAaA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,GADA,EACA;AAAA;;AACA,UAAA,CAAA,GAAA,EAAA;AACA,aAAA,WAAA,GAAA,MAAA;AACA,QAAA,UAAA,CAAA;AAAA,iBAAA,KAAA,CAAA,WAAA,GAAA,MAAA;AAAA,SAAA,EAAA,IAAA,CAAA;AACA;AACA;AANA,GAbA;AAqBA,EAAA,OAAA,oBACA,UAAA,CAAA,CAAA,YAAA,EAAA,gBAAA,CAAA,CADA,EAEA,YAAA,CAAA,CAAA,oBAAA,EAAA,eAAA,CAAA,CAFA;AAGA,IAAA,SAHA,qBAGA,CAHA,EAGA;AACA,WAAA,QAAA,GAAA,CAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,KANA;AAOA,IAAA,MAPA,kBAOA,MAPA,EAOA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,mBAAA,CAAA,MAAA,CAAA,CACA,IADA,CACA,UAAA,MAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,IAAA;AACA,OAJA,EAKA,KALA,CAKA,UAAA,CAAA;AAAA,eAAA,MAAA,CAAA,SAAA,CAAA,CAAA,CAAA,MAAA,CAAA;AAAA,OALA;AAMA,KAfA;AAgBA,IAAA,aAhBA,yBAgBA,IAhBA,EAgBA,KAhBA,EAgBA;AACA,UAAA,MAAA,GAAA,KAAA,OAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,MAAA,CAAA,KAAA,IAAA;AAAA,OAAA,CAAA;;AACA,UAAA,MAAA,IAAA,IAAA,EAAA;AACA,eAAA,KAAA,MAAA,MAAA,CAAA,UAAA,CAAA,GAAA,IAAA,GAAA,KAAA,CAAA;AACA;;AACA,aAAA,KAAA;AACA,KAtBA;AAuBA,IAAA,cAvBA,0BAuBA,IAvBA,EAuBA,KAvBA,EAuBA;AACA,UAAA,MAAA,GAAA,SAAA,CAAA,UAAA,EAAA,KAAA,EAAA,SAAA,CAAA,MAAA,EAAA,IAAA,EAAA,KAAA,OAAA,CAAA,CAAA;AACA,aAAA,MAAA,CAAA,MAAA;AACA,KA1BA;AA2BA,IAAA,OA3BA,qBA2BA;AAAA;;AACA,WAAA,aAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,WAAA,cAAA,CAAA;AACA,QAAA,IAAA,EAAA,SADA;AAEA,QAAA,MAAA,EAAA,KAAA,OAAA,CAAA,IAAA,GAAA,IAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,MAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA,IAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA;AAAA,SAAA;AAFA,OAAA;AAIA,KAjCA;AAkCA,IAAA,KAlCA,mBAkCA;AACA,MAAA,aAAA,CAAA,KAAA,UAAA,CAAA;AACA,KApCA;AAqCA,IAAA,aArCA,2BAqCA;AACA,WAAA,UAAA,GAAA,WAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,MAAA,CAAA,MAAA,CAAA,cAAA,CAAA,IAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,IAAA,CAAA,MAAA,CAAA,MAAA;AACA,OAFA,EAEA,IAFA,EAEA,IAFA,CAAA;AAGA;AAzCA,IArBA;AAgEA,EAAA,OAhEA,qBAgEA;AACA,SAAA,MAAA,CAAA,KAAA,MAAA,CAAA,MAAA;AACA,QAAA,CAAA,KAAA,UAAA,EAAA,KAAA,aAAA;AACA,GAnEA;AAoEA,EAAA,iBApEA,6BAoEA,EApEA,EAoEA,IApEA,EAoEA,IApEA,EAoEA;AACA,SAAA,OAAA,GAAA,EAAA;AACA,SAAA,MAAA,CAAA,EAAA,CAAA,MAAA;AACA,IAAA,IAAA;AACA,GAxEA;AAyEA,EAAA,gBAzEA,4BAyEA,EAzEA,EAyEA,IAzEA,EAyEA,IAzEA,EAyEA;AACA,SAAA,OAAA,GAAA,EAAA;AACA,IAAA,IAAA;AACA;AA5EA,CAAA","sourcesContent":["<template>\n<v-fade-transition>\n<v-app>\n\t<v-toolbar fixed>\n\t\t<v-toolbar-side-icon @click=\"viewReturn\">\n\t\t\t<v-icon>arrow_back</v-icon>\n\t\t</v-toolbar-side-icon>\n\t\t\t<div>\n\t\t\t\t<div class=\"body-2\">{{ $route.params.Name }}({{ busList.length }}辆车正在行驶)</div>\n\t\t\t\t\t<span class=\"body-1\">{{ $route.params.FromStation }}</span>\n                \t<v-icon small class=\"arrow_forward_icon\">arrow_forward</v-icon>\n                \t<span class=\"body-1\">{{ $route.params.ToStation }}</span>\t\n\t\t\t</div>\n\t\t\t<v-spacer></v-spacer>\n\t\t\t<v-btn icon :loading=\"loading\" >\n\t\t\t\t<v-fade-transition>\n\t\t\t\t<v-icon>{{ requestIcon }}</v-icon>\n\t\t\t</v-fade-transition>\n\t\t\t</v-btn>\n\t\t\t<v-btn icon @click=\"reverse\">\n\t\t\t\t<v-icon>swap_horiz</v-icon>\n\t\t\t</v-btn>\n\t</v-toolbar>\n\t    <v-timeline align-top dense class=\"timeline_wrap\" >\n\t    \t<v-timeline-item fill-dot small v-for=\"(stop, index) in $route.params.stops\" :key=\"index\">\n\t    <v-layout pt-3>\n          <v-flex xs3 >\n          \t<v-fade-transition>\n            <v-tooltip bottom v-if=\"\">\n              <v-badge small right slot=\"activator\" v-if=\"busList.length && iconShowJudge(stop.Name, 'in')\">\n                <span slot=\"badge\">{{ getBusQuantify(stop.Name, true) }}</span>\n                <v-icon>directions_bus</v-icon>\n              </v-badge>\n            </v-tooltip>\n            </v-fade-transition>\n          </v-flex>\n          <v-fade-transition>\n          <v-flex class=\"driveout_icon_wrapper\" >\n            <v-badge small right v-if=\"busList.length && iconShowJudge(stop.Name, 'out')\">\n              <span slot=\"badge\">{{ getBusQuantify(stop.Name, false) }}</span>\n              <v-icon>directions_bus</v-icon>\n            </v-badge>\n          </v-flex>\n        </v-fade-transition>\n          <v-flex>\n            <strong>{{ stop.Name }}</strong>\n          </v-flex>\n        </v-layout>\n\t    </v-timeline-item>\n\t</v-timeline>\n\t<v-snackbar  color=\"error\" :timeout=\"timeout\" v-model=\"error_snackbar\">\n\t\t{{ errorMsg }}\n\t\t<v-btn\n        dark\n        flat\n        @click=\"error_snackbar = false\"\n      >\n        Close\n      </v-btn>\n\t</v-snackbar>\n</v-app>\n</v-fade-transition>\n</template>\n<script>\nimport { mapActions, mapGetters, mapMutations, mapState } from 'vuex'\nimport {requestRealTimeData} from '@/script/request'\nimport { filterObj } from '@/script/utils'\nexport default {\n\tdata: () => ({\n\t\terror_snackbar: false,\n\t\ttimeout: 3000,\n\t\tloading: false,\n\t\trequestIcon: 'none',\n\t\terrorMsg: \"\",\n\t\tintervalId: \"\",\n\t\tbusList: []\n\t}),\n\tcomputed: {\n\t\t...mapState([\"routers\"]),\n\t},\n\twatch: {\n\t\tloading(val) {\n\t\t\tif(!val) {\n\t\t\t\tthis.requestIcon = 'done'\n\t\t\t\tsetTimeout(() => (this.requestIcon = 'none'), 1000)\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n    ...mapActions([\"viewReturn\", \"viewConversion\"]),\n    ...mapMutations([\"updateRealTimeData\", \"reverseRouter\"]),\n   \tshowError(e) {\n   \t\tthis.errorMsg = e\n   \t\tthis.error_snackbar = true\n   \t},\n   \tupdate(params) {\n   \t\tthis.loading = true\n   \t\trequestRealTimeData(params)\n   \t\t.then(result => {\n   \t\t\tthis.loading = false\n   \t\t\tthis.busList = result.data\n   \t\t})\n   \t\t.catch(e => (this.showError(e.status)))\n   \t},\n   \ticonShowJudge(name, genre) {\n   \t\tlet result = this.busList.find(info => (info['name'] === name))\n   \t\tif(result != null) {\n   \t\t\treturn genre === (result[\"busState\"] ? 'in' : 'out')\n   \t\t}\n   \t\treturn false\n\t},\n\tgetBusQuantify(name, logic) {\n\t\tlet result = filterObj('busState', logic, (filterObj('name', name, this.busList)))\n\t\treturn result.length\n\t},\n\treverse() {\n\t\tthis.reverseRouter(this.$route.params.Id)\n\t\tthis.viewConversion({\n\t\t\tname: 'details',\n\t\t\tparams: this.routers.flat().find(r => r[\"Name\"] === this.$route.params[\"Name\"] && r['Id'] !== this.$route.params[\"Id\"])\n\t\t})\n\t},\n\tclear() {\n\t\tclearInterval(this.intervalId)\n\t},\n\tstartInterval() {\n\t\tthis.intervalId = setInterval((self) => {\n\t\t\tif(self.$route.params.hasOwnProperty(\"Id\"))self.update(self.$route.params);\n\t\t}, 4000, this)\n\t}\n\t},\n\tmounted() {\n\t\tthis.update(this.$route.params)\n\t\tif(!this.intervalId)this.startInterval();\n\t},\n\tbeforeRouteUpdate (to, from, next) {\n\t\tthis.busList = []\n\t\tthis.update(to.params)\n\t\tnext()\n  },\n  \tbeforeRouteLeave (to, from, next) {\n  \t\tthis.busList = []\n  \t\tnext()\n  \t}\n}\n</script>\n<style scoped>\n.toolbar_titl {\n  flex-direction: column;\n  justify-content: center;\n}\n.timeline_wrap {\n\tmargin-top: 55px;\n}\n.toolbar_titl > span {\n  size: 1.5rem;\n}\n.driveout_icon_wrapper {\n  position: absolute;\n  top: 45px;\n}\n\n</style>"],"sourceRoot":"src/page/details"}]}