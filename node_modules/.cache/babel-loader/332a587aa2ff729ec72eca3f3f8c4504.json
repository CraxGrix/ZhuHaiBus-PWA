{"remainingRequest":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/thread-loader/dist/cjs.js!/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js!/home/crax/Code/ZhuHaiBus-PWA/node_modules/vuetify-loader/lib/loader.js!/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/crax/Code/ZhuHaiBus-PWA/src/components/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/crax/Code/ZhuHaiBus-PWA/src/components/Search.vue","mtime":1546870104768},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1546870092283},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/thread-loader/dist/cjs.js","mtime":1546870100374},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js","mtime":1546870092233},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vuetify-loader/lib/loader.js","mtime":1546870102026},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1546870092283},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js","mtime":1546870101180}],"contextDependencies":[],"result":["import _Object$keys from \"/home/crax/Code/ZhuHaiBus-PWA/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { error } from 'util';\nimport { setTimeout } from 'timers';\nimport promplist from '../assets/json/promplist';\nexport default {\n  data: function data() {\n    return {\n      candidateArray: [],\n      inputString: '',\n      lineNumArray: null,\n      select: null,\n      state: false\n    };\n  },\n  watch: {\n    inputString: function inputString(val) {\n      this.candidateArray = [];\n      val && val !== this.select && val.length <= 5 && this.queryData(val);\n    }\n  },\n  methods: {\n    getSearchTopping: function getSearchTopping() {\n      return this.searchTopping;\n    },\n    fuzzyQuery: function fuzzyQuery(str, lineArray) {\n      return lineArray.filter(function (v) {\n        return v.indexOf(str.toUpperCase()) != -1;\n      }).sort(function (a, b) {\n        a = a.length;\n        b = b.length;\n\n        if (a > b) {\n          return 1;\n        }\n\n        if (a < b) {\n          return -1;\n        }\n\n        return 0;\n      }).slice(0, 2);\n    },\n    queryData: function queryData(str) {\n      this.candidateArray = this.fuzzyQuery(str, this.lineNumArray).map(function (value) {\n        return promplist[value];\n      });\n    },\n    changeState: function changeState() {\n      if (!this.candidateArray.length) {\n        this.state = !this.state;\n        this.$emit('PostSearchState', this.state);\n      }\n    },\n    postLineMsg: function postLineMsg(info) {\n      this.$emit('postLineMsg', info);\n      setTimeout(function (self) {\n        self.inputString = '';\n      }, 500, this);\n    }\n  },\n  mounted: function mounted() {\n    this.lineNumArray = _Object$keys(promplist);\n  }\n};",{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,SAAA,KAAA,QAAA,MAAA;AACA,SAAA,UAAA,QAAA,QAAA;AACA,OAAA,SAAA,MAAA,0BAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,cAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,YAAA,EAAA,IAHA;AAIA,MAAA,MAAA,EAAA,IAJA;AAKA,MAAA,KAAA,EAAA;AALA,KAAA;AAOA,GATA;AAUA,EAAA,KAAA,EAAA;AACA,IAAA,WADA,uBACA,GADA,EACA;AACA,WAAA,cAAA,GAAA,EAAA;AACA,MAAA,GAAA,IAAA,GAAA,KAAA,KAAA,MAAA,IAAA,GAAA,CAAA,MAAA,IAAA,CAAA,IAAA,KAAA,SAAA,CAAA,GAAA,CAAA;AACA;AAJA,GAVA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,aAAA,KAAA,aAAA;AACA,KAHA;AAIA,IAAA,UAJA,sBAIA,GAJA,EAIA,SAJA,EAIA;AACA,aAAA,SAAA,CACA,MADA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,OAAA,CAAA,GAAA,CAAA,WAAA,EAAA,KAAA,CAAA,CAAA;AAAA,OADA,EAEA,IAFA,CAEA,UAAA,CAAA,EAAA,CAAA,EAAA;AACA,QAAA,CAAA,GAAA,CAAA,CAAA,MAAA;AACA,QAAA,CAAA,GAAA,CAAA,CAAA,MAAA;;AACA,YAAA,CAAA,GAAA,CAAA,EAAA;AACA,iBAAA,CAAA;AACA;;AACA,YAAA,CAAA,GAAA,CAAA,EAAA;AACA,iBAAA,CAAA,CAAA;AACA;;AACA,eAAA,CAAA;AACA,OAZA,EAaA,KAbA,CAaA,CAbA,EAaA,CAbA,CAAA;AAcA,KAnBA;AAoBA,IAAA,SApBA,qBAoBA,GApBA,EAoBA;AACA,WAAA,cAAA,GAAA,KAAA,UAAA,CAAA,GAAA,EAAA,KAAA,YAAA,EAAA,GAAA,CACA,UAAA,KAAA;AAAA,eAAA,SAAA,CAAA,KAAA,CAAA;AAAA,OADA,CAAA;AAGA,KAxBA;AAyBA,IAAA,WAzBA,yBAyBA;AACA,UAAA,CAAA,KAAA,cAAA,CAAA,MAAA,EAAA;AACA,aAAA,KAAA,GAAA,CAAA,KAAA,KAAA;AACA,aAAA,KAAA,CAAA,iBAAA,EAAA,KAAA,KAAA;AACA;AACA,KA9BA;AA+BA,IAAA,WA/BA,uBA+BA,IA/BA,EA+BA;AACA,WAAA,KAAA,CAAA,aAAA,EAAA,IAAA;AACA,MAAA,UAAA,CACA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,WAAA,GAAA,EAAA;AACA,OAHA,EAIA,GAJA,EAKA,IALA,CAAA;AAOA;AAxCA,GAhBA;AA0DA,EAAA,OA1DA,qBA0DA;AACA,SAAA,YAAA,GAAA,aAAA,SAAA,CAAA;AACA;AA5DA,CAAA","sourcesContent":["<template>\n  <v-layout column>\n    <v-slide-y-transition>\n      <v-text-field\n        hide-details\n        label=\"请输入线路号码\"\n        class=\"search\"\n        background-color=\"#F1F3F4\"\n        solo\n        v-model=\"inputString\"\n        @focus=\"changeState\"\n        @blur=\"changeState\"\n      ></v-text-field>\n    </v-slide-y-transition>\n    <v-list class=\"search_prompt_box\" v-show=\"inputString\" two-line>\n      <div v-for=\"(items,index) of candidateArray\" :key=\"index\">\n        <template v-for=\"item of items\">\n          <v-list-tile :key=\"item.id\" ripple @click=\"postLineMsg(item)\">\n            <v-list-tile-content>\n              <v-list-tile-title>{{item.lineNumber}}</v-list-tile-title>\n              <v-list-tile-sub-title class=\"candidate_list_item_subtitle_wrap\">\n                <span>{{item.originStation}}</span>\n                <v-icon small>arrow_forward</v-icon>\n                <span>{{item.terminal}}</span>\n              </v-list-tile-sub-title>\n            </v-list-tile-content>\n          </v-list-tile>\n        </template>\n      </div>\n    </v-list>\n  </v-layout>\n</template>\n<script>\nimport { error } from 'util';\nimport { setTimeout } from 'timers';\nimport promplist from '../assets/json/promplist';\n\nexport default {\n  data() {\n    return {\n      candidateArray: [],\n      inputString: '',\n      lineNumArray: null,\n      select: null,\n      state: false,\n    };\n  },\n  watch: {\n    inputString(val) {\n      this.candidateArray = [];\n      val && val !== this.select && val.length <= 5 && this.queryData(val);\n    },\n  },\n  methods: {\n    getSearchTopping() {\n      return this.searchTopping;\n    },\n    fuzzyQuery(str, lineArray) {\n      return lineArray\n        .filter(v => v.indexOf(str.toUpperCase()) != -1)\n        .sort((a, b) => {\n          a = a.length;\n          b = b.length;\n          if (a > b) {\n            return 1;\n          }\n          if (a < b) {\n            return -1;\n          }\n          return 0;\n        })\n        .slice(0, 2);\n    },\n    queryData(str) {\n      this.candidateArray = this.fuzzyQuery(str, this.lineNumArray).map(\n        value => promplist[value],\n      );\n    },\n    changeState() {\n      if (!this.candidateArray.length) {\n        this.state = !this.state;\n        this.$emit('PostSearchState', this.state);\n      }\n    },\n    postLineMsg(info) {\n      this.$emit('postLineMsg', info);\n      setTimeout(\n        (self) => {\n          self.inputString = '';\n        },\n        500,\n        this,\n      );\n    },\n  },\n  mounted() {\n    this.lineNumArray = Object.keys(promplist);\n  },\n};\n</script>\n\n<style lang=\"css\" scoped>\n.candidate_list_item_subtitle_wrap {\n  display: flex;\n  align-items: center;\n}\n\n.search_prompt_box {\n  position: absolute;\n  width: 100%;\n  top: 100px;\n  z-index: 999;\n}\n</style>\n"],"sourceRoot":"src/components"}]}