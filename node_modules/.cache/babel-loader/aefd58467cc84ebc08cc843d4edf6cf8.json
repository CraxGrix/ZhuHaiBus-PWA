{"remainingRequest":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/thread-loader/dist/cjs.js!/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js!/home/crax/Code/ZhuHaiBus-PWA/src/store/index.js","dependencies":[{"path":"/home/crax/Code/ZhuHaiBus-PWA/src/store/index.js","mtime":1550350048089},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1550211689884},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/thread-loader/dist/cjs.js","mtime":1550211706775},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js","mtime":1550211689805}],"contextDependencies":[],"result":["import _Promise from \"/home/crax/Code/ZhuHaiBus-PWA/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.array.sort\";\nimport Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport router from \"@/router/index\";\nimport characterMatchRoute from \"@/script/utils\";\nVue.use(Vuex);\n\nfunction delayTrigger(handle, args, target, complete) {\n  setTimeout(function () {\n    target[handle](args);\n    complete();\n  }, 150);\n}\n\nexport default new Vuex.Store({\n  state: {\n    searchBarStatus: false,\n    screenHeight: null,\n    routers: []\n  },\n  getters: {\n    calculatePageOffset: function calculatePageOffset(state) {\n      return Math.floor(state.screenHeight / 65.5 * 0.5) * 65.5;\n    }\n  },\n  mutations: {\n    _changeSearchBarStatus: function _changeSearchBarStatus(state) {\n      state.searchBarStatus = !state.searchBarStatus;\n    },\n    setScreenHeight: function setScreenHeight(state, height) {\n      state.screenHeight = height;\n    },\n    addRouters: function addRouters(state, info) {\n      state.routers.unshift(info);\n    },\n    stickyRouters: function stickyRouters(state, id) {\n      state.routers.sort(function (info) {\n        return info.hasOwnProperty(id) ? -1 : 0;\n      });\n    },\n    reverseRouter: function reverseRouter(state, id) {\n      var index = state.routers.findIndex(function (el) {\n        return el.some(function (e) {\n          return e[\"Id\"] === id;\n        });\n      });\n      if (index !== -1) state.routers[index].reverse();\n    },\n    setRouters: function setRouters(state, routers) {\n      state.routers = routers;\n    }\n  },\n  actions: {\n    changeSearchBarState: function changeSearchBarState(context) {\n      return new _Promise(function (resolve, reject) {\n        delayTrigger(\"commit\", \"_changeSearchBarStatus\", context, resolve);\n      });\n    },\n    viewConversion: function viewConversion(_ref, params) {\n      var state = _ref.state,\n          commit = _ref.commit;\n      return new _Promise(function (resolve, reject) {\n        delayTrigger(\"push\", params, router, resolve);\n      }).then(function () {\n        return commit(\"stickyRouters\", params.Id);\n      });\n    },\n    viewReturn: function viewReturn() {\n      return new _Promise(function (resolve, reject) {\n        return delayTrigger(\"push\", \"/\", router, resolve);\n      });\n    }\n  }\n});",{"version":3,"sources":["/home/crax/Code/ZhuHaiBus-PWA/src/store/index.js"],"names":["Vue","Vuex","router","characterMatchRoute","use","delayTrigger","handle","args","target","complete","setTimeout","Store","state","searchBarStatus","screenHeight","routers","getters","calculatePageOffset","Math","floor","mutations","_changeSearchBarStatus","setScreenHeight","height","addRouters","info","unshift","stickyRouters","id","sort","hasOwnProperty","reverseRouter","index","findIndex","el","some","e","reverse","setRouters","actions","changeSearchBarState","context","resolve","reject","viewConversion","params","commit","then","Id","viewReturn"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport router from \"@/router/index\";\nimport characterMatchRoute from \"@/script/utils\";\nVue.use(Vuex);\nfunction delayTrigger(handle, args, target, complete) {\n  setTimeout(() => {\n    target[handle](args);\n    complete();\n  }, 150);\n}\nexport default new Vuex.Store({\n  state: {\n    searchBarStatus: false,\n    screenHeight: null,\n    routers: []\n  },\n  getters: {\n    calculatePageOffset: state => {\n      return Math.floor((state.screenHeight / 65.5) * 0.5) * 65.5;\n    }\n  },\n  mutations: {\n    _changeSearchBarStatus(state) {\n      state.searchBarStatus = !state.searchBarStatus;\n    },\n    setScreenHeight(state, height) {\n      state.screenHeight = height;\n    },\n    addRouters(state, info) {\n      state.routers.unshift(info);\n    },\n    stickyRouters(state, id) {\n      state.routers.sort(info => (info.hasOwnProperty(id) ? -1 : 0))\n    },\n    reverseRouter(state, id) {\n      let index = state.routers.findIndex(el => el.some(e => e[\"Id\"] === id));\n      if (index !== -1) state.routers[index].reverse();\n    },\n    setRouters(state, routers) {\n      state.routers = routers;\n    }\n  },\n  actions: {\n    changeSearchBarState(context) {\n      return new Promise((resolve, reject) => {\n        delayTrigger(\"commit\", \"_changeSearchBarStatus\", context, resolve);\n      });\n    },\n    viewConversion({ state, commit }, params) {\n      return new Promise((resolve, reject) => {\n        delayTrigger(\"push\", params, router, resolve);\n      }).then(() => commit(\"stickyRouters\", params.Id));\n    },\n    viewReturn() {\n      return new Promise((resolve, reject) =>\n        delayTrigger(\"push\", \"/\", router, resolve)\n      );\n    }\n  }\n});\n"]}]}