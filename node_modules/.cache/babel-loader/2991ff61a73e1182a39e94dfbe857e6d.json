{"remainingRequest":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js!/home/crax/Code/ZhuHaiBus-PWA/src/store/index.js","dependencies":[{"path":"/home/crax/Code/ZhuHaiBus-PWA/src/store/index.js","mtime":1550417942788},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1550211689884},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js","mtime":1550211689805}],"contextDependencies":[],"result":["import _Promise from \"/home/crax/Code/ZhuHaiBus-PWA/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.array.sort\";\nimport Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport router from \"@/router/index\";\nimport { characterMatchRoute, queryAnotherRoute } from \"@/script/utils\";\nVue.use(Vuex);\n\nfunction delayTrigger(handle, args, target, complete) {\n  setTimeout(function () {\n    target[handle](args);\n    complete();\n  }, 150);\n}\n\nexport default new Vuex.Store({\n  state: {\n    searchBarStatus: false,\n    screenHeight: null,\n    globalRouters: []\n  },\n  getters: {\n    calculatePageOffset: function calculatePageOffset(state) {\n      return Math.floor(state.screenHeight / 65.5 * 0.5) * 65.5;\n    }\n  },\n  mutations: {\n    _changeSearchBarStatus: function _changeSearchBarStatus(state) {\n      state.searchBarStatus = !state.searchBarStatus;\n    },\n    setScreenHeight: function setScreenHeight(state, height) {\n      state.screenHeight = height;\n    },\n    addRouters: function addRouters(state, routerInfo) {\n      state.globalRouters.unshift(routerInfo);\n    },\n    stickyRouter: function stickyRouter(state, _ref) {\n      var Id = _ref.Id;\n      state.globalRouters.sort(function (routerInfo) {\n        return routerInfo.Id === Id ? -1 : 0;\n      });\n    },\n    reverseRouter: function reverseRouter(state, _ref2) {\n      var Id = _ref2.Id;\n      var index = state.globalRouters.findIndex(function (route) {\n        return route.Id === Id;\n      });\n      console.log(index);\n      var anotherRouter = queryAnotherRoute(state.globalRouters[index]);\n      if (anotherRouter.length) state.globalRouters.splice(index, 1, anotherRouter[0]);\n    },\n    setGlobalRouters: function setGlobalRouters(state, routers) {\n      state.globalRouters = routers;\n    }\n  },\n  actions: {\n    changeSearchBarState: function changeSearchBarState(context) {\n      return new _Promise(function (resolve, reject) {\n        delayTrigger(\"commit\", \"_changeSearchBarStatus\", context, resolve);\n      });\n    },\n    viewConversion: function viewConversion(_ref3, opts) {\n      var state = _ref3.state,\n          commit = _ref3.commit;\n      return new _Promise(function (resolve, reject) {\n        delayTrigger(\"push\", opts, router, resolve);\n      }).then(function () {\n        return commit(\"stickyRouter\", opts.params);\n      });\n    },\n    viewReturn: function viewReturn() {\n      return new _Promise(function (resolve, reject) {\n        return delayTrigger(\"push\", \"/\", router, resolve);\n      });\n    }\n  }\n});",{"version":3,"sources":["/home/crax/Code/ZhuHaiBus-PWA/src/store/index.js"],"names":["Vue","Vuex","router","characterMatchRoute","queryAnotherRoute","use","delayTrigger","handle","args","target","complete","setTimeout","Store","state","searchBarStatus","screenHeight","globalRouters","getters","calculatePageOffset","Math","floor","mutations","_changeSearchBarStatus","setScreenHeight","height","addRouters","routerInfo","unshift","stickyRouter","Id","sort","reverseRouter","index","findIndex","route","console","log","anotherRouter","length","splice","setGlobalRouters","routers","actions","changeSearchBarState","context","resolve","reject","viewConversion","opts","commit","then","params","viewReturn"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport router from \"@/router/index\";\nimport { characterMatchRoute, queryAnotherRoute} from \"@/script/utils\";\nVue.use(Vuex);\nfunction delayTrigger(handle, args, target, complete) {\n  setTimeout(() => {\n    target[handle](args);\n    complete();\n  }, 150);\n}\nexport default new Vuex.Store({\n  state: {\n    searchBarStatus: false,\n    screenHeight: null,\n    globalRouters: []\n  },\n  getters: {\n    calculatePageOffset: state => {\n      return Math.floor((state.screenHeight / 65.5) * 0.5) * 65.5;\n    }\n  },\n  mutations: {\n    _changeSearchBarStatus(state) {\n      state.searchBarStatus = !state.searchBarStatus;\n    },\n    setScreenHeight(state, height) {\n      state.screenHeight = height;\n    },\n    addRouters(state, routerInfo) {\n      state.globalRouters.unshift(routerInfo);\n    },\n    stickyRouter(state, { Id }) {\n      state.globalRouters.sort(routerInfo => (routerInfo.Id === Id ? -1 : 0))\n    },\n    reverseRouter(state, { Id }) {\n      let index = state.globalRouters.findIndex(route => route.Id === Id)\n      console.log(index)\n      let anotherRouter = queryAnotherRoute(state.globalRouters[index])\n      if(anotherRouter.length) state.globalRouters.splice(index, 1, anotherRouter[0]);\n      \n    },\n    setGlobalRouters(state, routers) {\n      state.globalRouters = routers;\n    }\n  },\n  actions: {\n    changeSearchBarState(context) {\n      return new Promise((resolve, reject) => {\n        delayTrigger(\"commit\", \"_changeSearchBarStatus\", context, resolve);\n      });\n    },\n    viewConversion({ state, commit }, opts) {\n      return new Promise((resolve, reject) => {\n        delayTrigger(\"push\", opts, router, resolve);\n      }).then(() => commit(\"stickyRouter\", opts.params));\n    },\n    viewReturn() {\n      return new Promise((resolve, reject) =>\n        delayTrigger(\"push\", \"/\", router, resolve)\n      );\n    }\n  }\n});\n"]}]}