{"remainingRequest":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js!/home/crax/Code/ZhuHaiBus-PWA/src/store/main.js","dependencies":[{"path":"/home/crax/Code/ZhuHaiBus-PWA/src/store/main.js","mtime":1550125844365},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1546870092283},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js","mtime":1546870092233}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport _Promise from \"/home/crax/Code/ZhuHaiBus-PWA/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.filter\";\nimport _objectSpread from \"/home/crax/Code/ZhuHaiBus-PWA/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport router from '@/router/index';\nimport characterMatchRoute from '@/script/utils';\nimport getRealTimeData from '@/script/request';\nVue.use(Vuex);\n\nfunction delayTrigger(handle, args, target, complete) {\n  setTimeout(function () {\n    target[handle](args);\n    complete();\n  }, 150);\n}\n\nexport default new Vuex.Store({\n  state: {\n    searchBarStatus: false,\n    screenHeight: null,\n    routers: []\n  },\n  getters: {\n    calculatePageOffset: function calculatePageOffset(state) {\n      return Math.floor(state.screenHeight / 65.5 * 0.5) * 65.5;\n    }\n  },\n  mutations: {\n    _changeSearchBarStatus: function _changeSearchBarStatus(state) {\n      state.searchBarStatus = !state.searchBarStatus;\n    },\n    setScreenHeight: function setScreenHeight(state, height) {\n      state.screenHeight = height;\n    },\n    addRouters: function addRouters(state, payloadArray) {\n      state.routers.unshift(payloadArray);\n    },\n    stickyRouters: function stickyRouters(state, id) {\n      state.routers.sort(function (router) {\n        return router.every(function (r) {\n          return r['Id'] !== id;\n        }) ? 0 : -1;\n      });\n    },\n    updateRealTimeData: function updateRealTimeData(state, params) {\n      var id = params.id;\n      var data = params.data;\n      var busQuantity = data.length;\n      state.routers = state.routers.map(function (router) {\n        return router.map(function (r) {\n          return r['Id'] === id ? (r['stops'] = r['stops'].map(function (stop) {\n            return _objectSpread({}, stop, {\n              busInfo: data.filter(function (s) {\n                return s['name'] === stop['Name'];\n              })\n            });\n          })) && (r['busQuantity'] = busQuantity) && r : r;\n        });\n      });\n    },\n    reverseRouter: function reverseRouter(state, id) {\n      var index = state.routers.findIndex(function (el) {\n        return el.some(function (e) {\n          return e['Id'] === id;\n        });\n      });\n      if (index !== -1) state.routers[index].reverse();\n    },\n    setRouters: function setRouters(state, routers) {\n      state.routers = routers;\n    }\n  },\n  actions: {\n    changeSearchBarState: function changeSearchBarState(context) {\n      return new _Promise(function (resolve, reject) {\n        delayTrigger('commit', '_changeSearchBarStatus', context, resolve);\n      });\n    },\n    viewConversion: function viewConversion(_ref, id) {\n      var state = _ref.state,\n          commit = _ref.commit;\n      return new _Promise(function (resolve, reject) {\n        var params = state.routers.flat().find(function (r) {\n          return r['Id'] === id;\n        });\n        delayTrigger('push', {\n          name: 'details',\n          params: params\n        }, router, resolve);\n      }).then(function () {\n        return commit('stickyRouters', id);\n      });\n    },\n    viewReturn: function viewReturn() {\n      return new _Promise(function (resolve, reject) {\n        return delayTrigger('back', undefined, router, resolve);\n      });\n    }\n  }\n});",{"version":3,"sources":["/home/crax/Code/ZhuHaiBus-PWA/src/store/main.js"],"names":["Vue","Vuex","router","characterMatchRoute","getRealTimeData","use","delayTrigger","handle","args","target","complete","setTimeout","Store","state","searchBarStatus","screenHeight","routers","getters","calculatePageOffset","Math","floor","mutations","_changeSearchBarStatus","setScreenHeight","height","addRouters","payloadArray","unshift","stickyRouters","id","sort","every","r","updateRealTimeData","params","data","busQuantity","length","map","stop","busInfo","filter","s","reverseRouter","index","findIndex","el","some","e","reverse","setRouters","actions","changeSearchBarState","context","resolve","reject","viewConversion","commit","flat","find","name","then","viewReturn","undefined"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport router from '@/router/index'\nimport characterMatchRoute from '@/script/utils'\nimport getRealTimeData from '@/script/request'\nVue.use(Vuex)\nfunction delayTrigger(handle, args, target, complete) {\n\tsetTimeout(() => {\n\t\ttarget[handle](args)\n\t\tcomplete()\n\t}, 150,)\n}\n\nexport default new Vuex.Store({\n\tstate: {\n\t\tsearchBarStatus: false,\n\t\tscreenHeight: null,\n\t\trouters: []\n\t},\n\tgetters: {\n\t\tcalculatePageOffset: state => {\n\t\t\treturn Math.floor((state.screenHeight / 65.5) * 0.5) * 65.5\n\t\t}\n\t},\n\tmutations: {\n\t\t_changeSearchBarStatus(state) {\n\t\t\tstate.searchBarStatus = !state.searchBarStatus\n\t\t},\n\t\tsetScreenHeight(state, height) {\n\t\t\tstate.screenHeight = height\n\t\t},\n\t\taddRouters(state, payloadArray) {\n\t\t\tstate.routers.unshift(payloadArray)\n\t\t},\n\t\tstickyRouters(state, id) {\n\t\t\tstate.routers.sort(router => (router.every(r => r['Id'] !== id) ? 0 : -1))\n\t\t},\n\t\tupdateRealTimeData(state, params) {\n\t\t\tlet id = params.id\n\t\t\tlet data = params.data\n\t\t\tlet busQuantity = data.length\n\t\t\tstate.routers = state.routers.map(router => router.map(r => (r['Id'] === id ? ((r['stops'] = r['stops'].map(stop => ({...stop, busInfo: data.filter(s => s['name'] === stop['Name'])}))) && (r['busQuantity'] = busQuantity)) && r : r)))\n\t\t},\n\t\treverseRouter(state, id) {\n\t\t\tlet index = state.routers.findIndex(el => el.some(e => e['Id'] === id))\n\t\t\tif(index !== -1) state.routers[index].reverse()\n\t\t},\n\t\tsetRouters(state, routers) {\n\t\t\tstate.routers = routers\n\t\t}\n\t},\n\tactions: {\n\t\tchangeSearchBarState(context) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tdelayTrigger('commit', '_changeSearchBarStatus', context, resolve)\n    \t\t})\n\t\t},\n\t\tviewConversion({ state, commit }, id) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet params = state.routers.flat().find(r => r['Id'] === id)\n\t\t\t\tdelayTrigger('push', {name: 'details', params}, router, resolve)\n    \t\t}).then(() => (commit('stickyRouters', id)))\n\t\t},\n\t\tviewReturn() {\n\t\t\treturn new Promise((resolve, reject) => (delayTrigger('back',undefined,router, resolve)))\n\t\t},\n\t}\n\t\n})\n"]}]}