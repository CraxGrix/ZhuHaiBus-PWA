{"remainingRequest":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/crax/Code/ZhuHaiBus-PWA/src/page/index/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/crax/Code/ZhuHaiBus-PWA/src/page/index/index.vue","mtime":1550829548799},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1550211689884},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/babel-loader/lib/index.js","mtime":1550211689805},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vuetify-loader/lib/loader.js","mtime":1550211707105},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1550211689884},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js","mtime":1550211706840}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapActions, mapMutations } from \"vuex\";\nimport { getInfoById } from \"@/script/utils\";\nimport WebFontLoader from \"webfontloader\";\nexport default {\n  data: () => ({}),\n  computed: {\n    ...mapState([\"searchBarStatus\", \"globalRouters\"])\n  },\n  methods: {\n    ...mapActions([\"changeSearchBarState\"]),\n    ...mapMutations([\"setGlobalRouters\"]),\n    saveHistory(data) {\n      localStorage[\"history\"] = data;\n    },\n    getLocalHistory() {\n      return JSON.parse(localStorage.history).map(id => getInfoById(id));\n    },\n    formatRoutersInfo(routers) {\n      return JSON.stringify(routers.map(({ Id }) => Id));\n    },\n    existHistory() {\n      return localStorage.history == null;\n    }\n  },\n  watch: {\n    globalRouters(newVal) {\n      let data = this.formatRoutersInfo(newVal);\n      this.saveHistory(data);\n    }\n  },\n  mounted() {\n    if (!this.existHistory()) {\n      this.setGlobalRouters(this.getLocalHistory());\n    }\n    WebFontLoader.load({\n      google: {\n        families: [\"Roboto:100,300,400,500,700,900\"]\n      },\n      active: this.setFontLoaded\n    });\n  }\n};\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/page/index","sourcesContent":["<template>\n  <v-app>\n    <router-view name=\"header\">\n      <v-icon slot=\"side-icon\">menu</v-icon>\n      <v-toolbar-title slot></v-toolbar-title>\n      <v-btn icon slot=\"action\" @click=\"changeSearchBarState\">\n        <v-icon>search</v-icon>\n      </v-btn>\n    </router-view>\n    <v-fade-transition>\n      <router-view name=\"searchModal\" v-if=\"searchBarStatus\"></router-view>\n    </v-fade-transition>\n    <v-container fulid grid-list-lg>\n      <router-view\n        name=\"Card\"\n        v-for=\"(router, index) in globalRouters\"\n        :key=\"index\"\n        :router=\"router\"\n      ></router-view>\n    </v-container>\n  </v-app>\n</template>\n<script>\nimport { mapState, mapActions, mapMutations } from \"vuex\";\nimport { getInfoById } from \"@/script/utils\";\nimport WebFontLoader from \"webfontloader\";\nexport default {\n  data: () => ({}),\n  computed: {\n    ...mapState([\"searchBarStatus\", \"globalRouters\"])\n  },\n  methods: {\n    ...mapActions([\"changeSearchBarState\"]),\n    ...mapMutations([\"setGlobalRouters\"]),\n    saveHistory(data) {\n      localStorage[\"history\"] = data;\n    },\n    getLocalHistory() {\n      return JSON.parse(localStorage.history).map(id => getInfoById(id));\n    },\n    formatRoutersInfo(routers) {\n      return JSON.stringify(routers.map(({ Id }) => Id));\n    },\n    existHistory() {\n      return localStorage.history == null;\n    }\n  },\n  watch: {\n    globalRouters(newVal) {\n      let data = this.formatRoutersInfo(newVal);\n      this.saveHistory(data);\n    }\n  },\n  mounted() {\n    if (!this.existHistory()) {\n      this.setGlobalRouters(this.getLocalHistory());\n    }\n    WebFontLoader.load({\n      google: {\n        families: [\"Roboto:100,300,400,500,700,900\"]\n      },\n      active: this.setFontLoaded\n    });\n  }\n};\n</script>"]}]}