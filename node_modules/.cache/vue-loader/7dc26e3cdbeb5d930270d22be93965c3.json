{"remainingRequest":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/crax/Code/ZhuHaiBus-PWA/src/components/Card/BasicInfoCard.vue?vue&type=style&index=0&id=0bf0c406&lang=css&scoped=true&","dependencies":[{"path":"/home/crax/Code/ZhuHaiBus-PWA/src/components/Card/BasicInfoCard.vue","mtime":1547061661803},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/css-loader/index.js","mtime":1546870092447},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1546870101180},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/postcss-loader/src/index.js","mtime":1546870099138},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vuetify-loader/lib/loader.js","mtime":1546870102026},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1546870092283},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js","mtime":1546870101180}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.container {\n  padding: 6px;\n}\n\n\n.line_card {\n  margin: 10px 0;\n  border-radius: 20px;\n}\n\n.line_card_info_wrap {\n  display: flex;\n  justify-content: space-between;\n  min-height: 80px;\n  padding: 10px;\n}\n\n.line_card_actions_wrap {\n  display: flex;\n  align-items: center;\n}\n\n.line_title_wrap {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n}\n\n.line_title_wrap > span {\n  text-align: center;\n  font-size: 1em;\n}\n\n.overflow {\n  max-height: 350px;\n  overflow: auto;\n  overflow-x: hidden;\n  padding: 20px 10px;\n}\n\n.test_icon {\n  position: absolute;\n  left: 0;\n  top: 30px;\n}\n\n.icon_forward {\n}\n\nul {\n  position: relative;\n  padding-top: 20px;\n}\n\n.station_wrap {\n  display: flex;\n  min-height: 50px;\n  list-style-type: disc;\n}\n\n.drive_out_bus_icon {\n  position: absolute;\n  left: 0;\n  top: 24px;\n}\n\n.station_name_wrap {\n  left: 24px;\n}\n\n.station_details_wrap {\n}\n\n@keyframes rotation {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.loading {\n  animation: rotation 0.6s linear infinite;\n}\n",{"version":3,"sources":["BasicInfoCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"BasicInfoCard.vue","sourceRoot":"src/components/Card","sourcesContent":["<template>\n  <v-container grid-list-md>\n    <v-card class=\"line_card\">\n      <div class=\"line_card_info_wrap\">\n        <div class=\"line_title_wrap\">\n          <h3 class=\"line_title\">{{ lineDetails.lineNumber }}</h3>\n          <span>开往 {{ lineDetails.terminal }}</span>\n        </div>\n        <div class=\"line_card_actions_wrap\">\n           <v-btn\n            :class=\"{loading: load}\"\n            class=\"sync\"\n            color=\"grey\"\n            flat\n            icon\n            :disabled=\"true\"\n          >\n            <v-icon>sync</v-icon>\n          </v-btn> \n          <v-btn\n            flat\n            icon\n            color=\"grey\"\n            style=\"margin: 0 auto\"\n            :disabled=\"!judgeDisabledState\"\n            @click=\"changeLineDirection\"\n          >\n            <v-icon>swap_horiz</v-icon>\n          </v-btn>\n          <v-btn flat icon color=\"grey\" style=\"margin: 0 auto\" @click=\"showMore = !showMore\">\n            <v-icon>{{showMore ? \"keyboard_arrow_down\" : \"keyboard_arrow_up\"}}</v-icon>\n          </v-btn>\n        </div>\n      </div>\n      <v-divider></v-divider>\n      <v-slide-y-transition>\n        <div class=\"overflow\" v-if=\"lineDetails.stations !== undefined\" v-show=\"showMore\">\n          <div class=\"timeline\"></div>\n          <Station v-for=\"(station, index) in lineDetails.stations\" :station=\"station\" :key=\"index\"></Station>\n        </div>\n      </v-slide-y-transition>\n    </v-card>\n  </v-container>\n</template>\n<script>\n// 单向线路406 407 Z103 Z105 Z107 Z116 Z117 Z121A Z261 Z265 Z267 Z16 Z56 Z75 Z76 101\n\nimport { setTimeout } from 'timers';\n\nexport default {\n  props: ['msg'],\n  components: {\n    Station: () => import('./Station'),\n  },\n  data() {\n    return {\n      lineDetails: this.msg,\n      showMore: false,\n      load: false,\n      disabledState: true,\n      intervalId: null\n    };\n  },\n  computed: {\n    judgeDisabledState() {\n      return this.lineDetails.direction && this.disabledState && !this.load;\n    },\n  },\n  watch: {\n    showMore(state) {\n       if(state) {\n        this.intervalId = setInterval((self) => {\n        self.updateRealTimeData()\n      }, 5000, this) \n      } else {\n        clearInterval(this.intervalId)\n      } \n    }\n  },\n  methods: {\n    mergeData(realTimeData) {\n      this.clearRealData();\n      this.lineDetails.stations.forEach((station) => {\n        realTimeData.forEach((item) => {\n          if (station.Name === item.name) {\n            if (item.state) {\n              station.driveInBusNumber.push(item);\n            } else {\n              station.driveOutBusNumber.push(item);\n            }\n          }\n        });\n      });\n    },\n    clearRealData() {\n      this.lineDetails.stations.forEach((station) => {\n        station.driveInBusNumber = [];\n        station.driveOutBusNumber = [];\n      });\n    },\n    changeLineDirection() {\n      this.$http\n        .getLineDetails(this.lineDetails.reverseLineInfo)\n        .then((details) => {\n          this.$http.getStationsList(details[0]).then((stationArray) => {\n            this.lineDetails = {\n              ...details[0],\n              stations: stationArray,\n            };\n            this.updateRealTimeData();\n          });\n        });\n    },\n    updateRealTimeData() {\n      if(!this.load) {\n        this.load = true;\n        this.$http.getRealTimeData(this.lineDetails).then((response) => {\n        this.mergeData(response);\n        this.load = false\n      }).catch(error => {\n        this.load = false\n      })\n      }\n      \n    },\n  },\n\n  created() {\n    this.$http.getStationsList(this.lineDetails).then((response) => {\n      this.lineDetails.stations = response;\n    })\n    this.showMore = true\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n.container {\n  padding: 6px;\n}\n\n\n.line_card {\n  margin: 10px 0;\n  border-radius: 20px;\n}\n\n.line_card_info_wrap {\n  display: flex;\n  justify-content: space-between;\n  min-height: 80px;\n  padding: 10px;\n}\n\n.line_card_actions_wrap {\n  display: flex;\n  align-items: center;\n}\n\n.line_title_wrap {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n}\n\n.line_title_wrap > span {\n  text-align: center;\n  font-size: 1em;\n}\n\n.overflow {\n  max-height: 350px;\n  overflow: auto;\n  overflow-x: hidden;\n  padding: 20px 10px;\n}\n\n.test_icon {\n  position: absolute;\n  left: 0;\n  top: 30px;\n}\n\n.icon_forward {\n}\n\nul {\n  position: relative;\n  padding-top: 20px;\n}\n\n.station_wrap {\n  display: flex;\n  min-height: 50px;\n  list-style-type: disc;\n}\n\n.drive_out_bus_icon {\n  position: absolute;\n  left: 0;\n  top: 24px;\n}\n\n.station_name_wrap {\n  left: 24px;\n}\n\n.station_details_wrap {\n}\n\n@keyframes rotation {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.loading {\n  animation: rotation 0.6s linear infinite;\n}\n</style>\n"]}]}