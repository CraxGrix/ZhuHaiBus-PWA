{"remainingRequest":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/crax/Code/ZhuHaiBus-PWA/src/components/Index/header.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/crax/Code/ZhuHaiBus-PWA/src/components/Index/header.vue","mtime":1549184173688},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/css-loader/index.js","mtime":1546870092447},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1546870101180},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/postcss-loader/src/index.js","mtime":1546870099138},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vuetify-loader/lib/loader.js","mtime":1546870102026},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/cache-loader/dist/cjs.js","mtime":1546870092283},{"path":"/home/crax/Code/ZhuHaiBus-PWA/node_modules/vue-loader/lib/index.js","mtime":1546870101180}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* font-family: 'Monoton', cursive; 标题字体\nfont-family: 'UnifrakturMaguntia', cursive; */\n\n/* .header_title {\n  font-family: \"Monoton\", cursive;\n  font-family: \"UnifrakturMaguntia\", cursive;\n} */\n.location_wrapper {\n  line-height: 80px;\n  text-align: center;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n.location_error_container {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 0;\n  justify-content: center;\n}\n",{"version":3,"sources":["header.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"header.vue","sourceRoot":"src/components/Index","sourcesContent":["<template>\n  <div>\n    <v-card flat color=\"white\">\n      <v-toolbar flat tabs height=\"80px\" color=\"white\">\n        <v-toolbar-side-icon></v-toolbar-side-icon>\n        <v-toolbar-items class=\"location_container\">\n          <v-btn\n            icon\n            :loading=\"geoLocationState === 'requestIn' || geoLocationState === ''\"\n            :disable=\"geoLocationState === 'requestIn' || geoLocationState === ''\"\n            @click=\"requestGeoLocation\"\n          >\n            <v-icon v-if=\"geoLocationState === 'error'\">location_off</v-icon>\n            <v-icon v-else-if=\"geoLocationState === 'warning'\">not_listed_location</v-icon>\n            <v-icon v-else>edit_location</v-icon>\n\n            <span slot=\"loader\" class=\"custom_loader\">\n              <v-icon light>cached</v-icon>\n            </span>\n          </v-btn>\n          <div class=\"location_wrapper\">\n            <h4>{{ computedName }}</h4>\n          </div>\n        </v-toolbar-items>\n        <v-spacer></v-spacer>\n        <v-toolbar-items>\n          <v-btn icon @click=\"changeSearchBarState\">\n            <v-icon>search</v-icon>\n          </v-btn>\n        </v-toolbar-items>\n        <v-tabs slot=\"extension\" v-model=\"tabs\" fixed-tabs color=\"transparent\">\n          <v-tabs-slider></v-tabs-slider>\n          <v-tab href=\"#mobile-tabs-nearByRoutes\" class=\"primary--text\">\n            <v-icon>pin_drop</v-icon>\n          </v-tab>\n          <v-tab href=\"#mobile-tabs-star\" class=\"primary--text\">\n            <v-icon>star</v-icon>\n          </v-tab>\n        </v-tabs>\n      </v-toolbar>\n      <v-tabs-items flat v-model=\"tabs\" class=\"white\">\n        <v-tab-item :value=\"'mobile-tabs-nearByRoutes'\">\n          <div class=\"location_error_container\" v-if=\"geoLocationState === 'warning'\">\n            <v-alert\n              :value=\"true\"\n              type=\"warning\"\n            >您当前位置不在珠海市范围内，附近站点功能失效。(出现这种情况的原因可能是您正在使用代理访问该网站，请关闭代理后点击上方按钮重试。)</v-alert>\n          </div>\n          <div class=\"location_error_container\" v-else-if=\"geoLocationState === 'error'\">\n            <v-alert :value=\"true\" type=\"error\">您尚未给予本网页定位权限，附近站点功能无法启用。点击上面按钮以重新授权。</v-alert>\n          </div>\n          <Card v-for=\"(router, index) in stopRouters\" :key=\"index\" :router=\"router\"/>\n        </v-tab-item>\n        <v-tab-item :value=\"'mobile-tabs-star'\">\n                <Card v-for=\"(router, index) in favoriteRouters\" :key=\"index\" :router=\"router\"/>\n\n        </v-tab-item>\n       \n      </v-tabs-items>\n    </v-card>\n    <transition name=\"fade\">\n      <SearchModal v-if=\"searchBarState\"/>\n    </transition>\n  </div>\n</template>\n<script>\nimport { mapMutations, mapGetters, mapState } from \"vuex\";\nexport default {\n  components: {\n    Card: () => import(\"@/components/Index/card.vue\"),\n    SearchModal: () => import(\"@/components/Index/SearchModal\")\n  },\n  data() {\n    return {\n      tabs: null,\n      loading: false,\n      inputValue: \"\",\n    };\n  },\n  watch: {\n    recentStop({ routers }) {\n      if (routers !== undefined) {\n        let filteredRouter = routers.reduce((accumulator, current) => {\n          if (\n            !accumulator.find(\n              ({ name }) =>\n                name.split(\"路\")[0] === current[\"name\"].split(\"路\")[0]\n            )\n          ) {\n            accumulator.push(current);\n          }\n          return accumulator;\n        }, []);\n        this.$work.postMessage({\n          flag: \"queryRouterByIdArray\",\n          data: filteredRouter\n        });\n        this.$work.onmessage = e => {\n          this.setStopRouters(e.data);\n        };\n      }\n      this.setStopRouters(null);\n    },\n    favoriteRouters(newArr) {\n    localStorage[\"favoriteRouters\"] = JSON.stringify(newArr)\n    }\n  },\n  methods: {\n    ...mapMutations([\n      \"changeSearchBarState\",\n      \"setStopRouters\",\n      \"changeGeoLocationState\"\n    ]),\n    requestGeoLocation() {\n      this.$geolocation.getCurrentPosition();\n      this.changeGeoLocationState(\"requestIn\");\n    },\n    \n  },\n  computed: {\n    ...mapState([\n      \"favoriteRouters\",\n      \"screenHeight\",\n      \"searchBarState\",\n      \"stopRouters\",\n      \"geoLocationState\"\n    ]),\n    ...mapGetters([\"recentStop\"]),\n    computedName() {\n      return this.recentStop === undefined ? \"\" : this.recentStop.name;\n    }\n  },\n\n  mounted() {\n  }\n};\n</script>\n<style>\n/* font-family: 'Monoton', cursive; 标题字体\nfont-family: 'UnifrakturMaguntia', cursive; */\n\n/* .header_title {\n  font-family: \"Monoton\", cursive;\n  font-family: \"UnifrakturMaguntia\", cursive;\n} */\n.location_wrapper {\n  line-height: 80px;\n  text-align: center;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n.location_error_container {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 0;\n  justify-content: center;\n}\n</style>\n"]}]}